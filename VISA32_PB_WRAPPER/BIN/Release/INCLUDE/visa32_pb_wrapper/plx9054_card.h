//
//
//  Generated by StarUML(tm) C++ Add-In
//
//  @ Project : VISA32_PB_WRAPPER_CLASS
//  @ File Name : plx9054_card.h
//  @ Date : 2013/6/26
//  @ Author : cv
//
//

#if !defined(_PLX9054_CARD_H)
#define _PLX9054_CARD_H

#include "card_info.h"
//-----------------------------------------------------------------------
///使用PLX9054桥芯片的设备基类
/** 
 *	常被做为基类使用，但也可以用来定义对象
 *	@since		2012.12.24
 */
class plx9054_card : public card_info {
private:	//深度封装
	///ni-visa库的主资源id
	DWORD	visa_default;	/**< 在默认构造函数内赋值 */
	///当前资源的id
	DWORD	card_res;		/**< 在init函数内赋值 */
	///DWORD数据中的某一位
	DWORD	bit_num;		/**< 在0~31以内取值 */
	///PLX9054配EEPROM的偏移地址值
	DWORD	eeprom_addr;	/**< 在0x0~0x1FF以内取DWORD边界 */
	///外部不可见的资源健康信号
	bool	health;			/**< true时可release, false时可init */
public:
	plx9054_card(const plx9054_card &card);
	///copy成员函数
	plx9054_card&	operator=(const plx9054_card &card);
	void memory_bit(DWORD bar, DWORD offset, DWORD bit_num, BOOL value)	const;
	void memory_bit_toggle(DWORD bar, DWORD offset, DWORD bit_num)	const;
	bool memory_bit_test(DWORD bar, DWORD offset, DWORD bit_num)	const;
	void memory_bit_set(DWORD bar, DWORD offset, DWORD bit_num)	const;
	void memory_bit_clear(DWORD bar, DWORD offset, DWORD bit_num)	const;
	WORD get_card_slot();
	///plx9054_card类默认的构造函数
	/** 
	 *	初始化所有非类成员变量,打开默认的visa管理器ID
	 */
	plx9054_card();
	///plx9054_card类默认的析构函数
	/** 
	 *	关闭默认的visa管理器ID
	 */	
	~plx9054_card();
	///选择要操作的PCI/PXI资源
	/** 
	 *	选择从窗体要使用的板卡,导出类可以重写此函数
	 *	@retval		true	成功
	 *	@retval		false	失败	 
	 */
	virtual	bool	select_visa_pci_pxi_card()	const;	
	///初始化板卡资源ID
	/** 
	 *	@retval		true	成功
	 *	@retval		false	失败	 
	 */	
	virtual	bool	init();
	///释放板卡资源ID
	/** 
	 *	@return		void
	 */	
	virtual	bool	release();
	///复位当前板卡资源
	/** 
	 *	@return		void
	 */	
	void	plx9054_reset_card()	const;
	///读取板卡EEPROM的值
	/** 
	 *	@return		32位eeprom的值
	 */	
	DWORD	plx9054_read_eeprom_32()	const;
	///写板卡的EEPROM
	/** 
	 *	@param		[in]	param1,要写入的32位eeprom的值
	 *	@return		void
	 */	
	void	plx9054_write_eeprom_32(DWORD	param1)	const;
	///检查板卡的EEPROM是不是cv方式的
	/** 
	 *	@retval		true	是
	 *	@retval		false	否	 
	 */		
	bool	check_plx9054_eeprom_is_cv_style()	const;
	///返回板载FPGA逻辑的版本
	/** 
	 *	@return		返回的版本的值
	 */	
	DWORD	get_plx9054_fpga_logic_version()	const;
	///为板卡烧写cv方式的EEPROM
	/** 
	 *	@retval		true	成功
	 *	@retval		false	失败	 
	 */		
	bool	burn_cv_style_eeprom_for_this_plx9054()	const;
	///清内存位
	/** 
	 *	@return		void
	 */		
	void	memory_bit_clear()	const;
	///置内存位
	/** 
	 *	@return		void
	 */		
	void	memory_bit_set()	const;
	///读内存位
	/** 
	 *	@return		void
	 */		
	bool	memory_bit_test()	const;
	///选择要操作的位
	/** 
	 *	@param		[in]	param1,要操作的位0~31之内选择值	
	 *	@return		void
	 */		
	void	set_bit_num(DWORD	param1);
	///选择要操作的位的窗体
	/** 
	 *	@return		void
	 */	
	bool	set_bit_num();
	///选择要操作的EEPROM的地址
	/** 
	 *	@param		[in]	param1,要操作的EEPROM的地址0x0~0x1FF之内取DWORD边界
	 *	@return		void
	 */		
	void	set_eeprom_addr(DWORD	param1);
	///选择要操作的EEPROM的地址的窗体
	/** 
	 *	@retval	true	修改成功
	 *	@retval	false	修改失败
	 */		
	bool	set_eeprom_addr();
	///读取选定的要操作的位
	/** 
	 *	@return		返回的要操作的位,正常为0~31之内
	 */		
	inline	DWORD	get_bit_num()	const	{	return	bit_num;}
	///读取选定的要操作的EEPROM的地址
	/** 
	 *	@return		返回的要操作的EEPROM的地址
	 */		
	inline	DWORD	get_eeprom_addr()	const	{	return	eeprom_addr;}
	///读取已打开的板卡资源ID
	/** 
	 *	@return		板卡资源ID	card_res
	 */		
	inline	DWORD	get_card_res()	const	{	return	card_res;}
	///读取visa32的资源ID
	/** 
	 *	@return		visa32资源ID	visa_default
	 */	
	inline	DWORD	get_visa_default()	const	{	return	visa_default;}	
	///dram强度压力测试
	/** 
	 *	@param		[in]	param1, access_mode支持8, 16, 32三种模式
	 *	@param		[in]	param2, 共进行的重复的测试的次数	 
	 *	@return		在测试过程中发生的总的错误的字节数
	 */			
	DWORD	dram_stress_testing(DWORD	param1, DWORD	param2)	const;
};

#endif  //_PLX9054_CARD_H
