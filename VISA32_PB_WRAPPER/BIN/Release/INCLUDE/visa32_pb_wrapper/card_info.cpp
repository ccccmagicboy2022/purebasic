//
//
//  Generated by StarUML(tm) C++ Add-In
//
//  @ Project : VISA32_PB_WRAPPER_CLASS
//  @ File Name : card_info.cpp
//  @ Date : 2013/6/26
//  @ Author : cv
//
//

#include "card_info.h"
#include "VISA32_PB_WRAPPER_DLL.h"

card_info::card_info()	:	card_rscs(NULL), mem_bar(13/* bar2 */), mem_offset(0x0), win_x(100), win_y(100), win_title(NULL), mem_size(0x400/* 1kbyte */), backup2(0), backup3(0)
{
	card_rscs	=	new char[1024]();//…Í«Îheap
	win_title	=	new char[1024]();//…Í«Îheap

	strcpy(card_rscs, "PXI0::CHASSIS1::SLOT1::INSTR");
	strcpy(win_title, "«Î ‰»Î–¬¥∞ø⁄µƒ±ÍÃ‚");
}

card_info::~card_info()
{
	delete	[]	card_rscs;
	delete	[]	win_title;
}

void	card_info::set_card_rscs(const	char*	const	param1)	const
{
	strcpy(card_rscs, param1);
}

bool	card_info::set_card_rscs(unsigned short param1 /* = 0 */, unsigned short param2 /* = 0 */)	const
{
 	return	VISA32_PB_WRAPPER_DLL::select_visa_pci_pxi_card(card_rscs, param1, param2);
}

void	card_info::set_mem_bar(DWORD	param1)
{
	mem_bar	=	param1;
}

bool	card_info::set_mem_bar()
{
	return	VISA32_PB_WRAPPER_DLL::select_bar(&mem_bar);
}

void	card_info::set_mem_offset(DWORD	param1)
{
	mem_offset	=	param1;
}

bool	card_info::set_mem_offset()
{
	return	VISA32_PB_WRAPPER_DLL::hex_input(&mem_offset, 32);
}

void	card_info::set_mem_size(DWORD param1)
{
	mem_size	=	param1;
}

bool	card_info::set_mem_size()
{
	return	VISA32_PB_WRAPPER_DLL::hex_input(&mem_size, 32);
}
	
bool	card_info::select_ram0()
{
	DWORD	ram0_x	=	0;
	char	ram0[100]	=	"";
	char	ram_addr_range_low[100]	=	"";
	char	ram_addr_range_high[100]	=	"";
	bool	result	=	false;
	
	result	=	VISA32_PB_WRAPPER_DLL::select_ram0(&ram0_x);
	mem_offset	=	ram0_x*0x400;//∆´“∆µÿ÷∑
	mem_size	=	0x400;//1kbyte
	mem_bar	=	13;	//bar2
	itoa(ram0_x, ram0, 10);
	itoa(ram0_x*0x400, ram_addr_range_low, 16);
	itoa(ram0_x*0x400+0x3ff, ram_addr_range_high, 16);
	strcpy(win_title, "ram0_");
	strcat(win_title, ram0);
	strcat(win_title, "@0x");
	strcat(win_title, ram_addr_range_low);
	strcat(win_title, "~0x");
	strcat(win_title, ram_addr_range_high);
	return	result;
}

void	card_info::set_win_x(DWORD	param1)
{
	win_x	=	param1;
}

bool	card_info::set_win_x()
{
	return	VISA32_PB_WRAPPER_DLL::dec_input(&win_x);
}

void	card_info::set_win_y(DWORD	param1)
{
	win_y	=	param1;
}

bool	card_info::set_win_y()
{
	return	VISA32_PB_WRAPPER_DLL::dec_input(&win_y);
}

void	card_info::set_win_title(const char* const	param1)	const
{
	strcpy(win_title, param1);
}

bool	card_info::set_win_title()	const
{
	return	VISA32_PB_WRAPPER_DLL::string_input(win_title);
}

card_info& card_info::operator=(const card_info &card)
{
	strcpy(this->card_rscs, card.card_rscs);
	this->backup2	=	card.backup2;
	this->backup3	=	card.backup3;
	this->mem_bar	=	card.mem_bar;
	this->mem_offset	=	card.mem_offset;
	this->mem_size	=	card.mem_size;
	strcpy(this->win_title, card.win_title);
	this->win_x	=	card.win_x;
	this->win_y	=	card.win_y;

	return	*this;
}


card_info::card_info(const card_info &card)
{
	card_rscs	=	new char[1024]();//…Í«Îheap
	win_title	=	new char[1024]();//…Í«Îheap

	operator=(card);
}
