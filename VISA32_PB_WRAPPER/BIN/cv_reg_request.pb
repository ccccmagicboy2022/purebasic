  XIncludeFile  "COMatePLUS.pbi"
  XIncludeFile  "qrcodelib.pbi"
  XIncludeFile  "OSD_cv.pbi"
  XIncludeFile  "GetDiskSerial.pbi"
  XIncludeFile  "CPUID_Util.pbi"
  XIncludeFile  "SkinH.pbi"
  XIncludeFile  "BASSMOD.pbi"
  
  
  
  disk_hdll.i = GetDiskSerial_LoadDLL()    
  hdid.s  = PeekS(GetSerialNumber(0))
  MemoryFreeLibrary(disk_hdll)
    
  cpuid_hdll.i  = CPUID_Util_LoadDLL()
  cpuid_p = AllocateMemory(1024)
  GetCPUID(cpuid_p)
  cpuid.s = PeekS(cpuid_p)
  FreeMemory(cpuid_p)
  MemoryFreeLibrary(cpuid_hdll)
  
  hwnd  = OpenWindow(#PB_Any, 0, 0, 300, 130, "cv_reg_request", #PB_Window_MinimizeGadget|#PB_Window_ScreenCentered|#PB_Window_SystemMenu)
  SetWindowPos_(WindowID(hWnd), #HWND_TOP, 0, 0, 0, 0, #SWP_NOMOVE|#SWP_NOSIZE)
  name_sg = StringGadget(#PB_Any, 80, 10, 200, 20, "")
  hdid_sg = StringGadget(#PB_Any, 80, 40, 200, 20, "", #PB_String_ReadOnly)
  cpuid_sg  = StringGadget(#PB_Any, 80, 70, 200, 20, "", #PB_String_ReadOnly)
  SetGadgetText(name_sg, "cccc")
  SetGadgetText(hdid_sg, hdid)
  SetGadgetText(cpuid_sg, cpuid)
  save_bg = ButtonGadget(#PB_Any, 25, 100, 255, 20, "±£´æ", #PB_Button_Default)
  name_tg = TextGadget(#PB_Any, 10,  13, 66, 20, "NAME", #PB_Text_Right)
  hdid_tg = TextGadget(#PB_Any, 10,  43, 66, 20, "KEY1", #PB_Text_Right)
  cpuid_tg  = TextGadget(#PB_Any, 10,  73, 66, 20, "KEY2", #PB_Text_Right)
  
  AddKeyboardShortcut(hwnd, #PB_Shortcut_Escape, 15)
  
  Repeat
    Event.l = WaitWindowEvent()
    Select  Event
      Case  #PB_Event_Menu
        Select EventMenu()
          Case  15
            quit  = #True
        EndSelect        
      Case  #PB_Event_Gadget
        Select  EventGadget()
          Case  save_bg
            DeleteFile(GetCurrentDirectory()+"cv_reg.nfo")
            CreateFile(0, GetCurrentDirectory()+"cv_reg.nfo")
            WriteStringN(0, "NAME: "+GetGadgetText(name_sg))
            WriteStringN(0, "KEY1: "+GetGadgetText(hdid_sg))
            WriteStringN(0, "KEY2: "+GetGadgetText(cpuid_sg))
            CloseFile(0)
            MessageBox_(GetFocus_(), "save to " + GetCurrentDirectory() + "cv_reg.nfo", "cv", #MB_ICONINFORMATION|#MB_SYSTEMMODAL)
        EndSelect
    EndSelect
  Until Event = #PB_Event_CloseWindow Or  quit  = #True
    
  CloseWindow(hwnd) 
  
  End
  

;
; PureBUILD Build = 6 [generated by PureBUILD Plugin]
; IDE Options = PureBasic 5.00 (Windows - x86)
; CursorPosition = 41
; EnableXP
; UseIcon = new_icon\cv_reg_request\reg_req.ico
; Executable = Release\cv_reg_request.exe
